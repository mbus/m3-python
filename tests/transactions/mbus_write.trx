# test the mbus write functionality of ICE
# writes a simple program to the PRC's memory
# 
# Andrew Lukefahr
# 20170710

# SUPPORTED COMMANDS:
# WAIT HEXVALUE - waits until the hex value message is recieved
# SLEEP X - sleeps X seconds before proceeding (can be floating point)
# SEND HEXVALUE - sends the hexvalue over the ICE interface

# baudrate negotiation
WAIT 560000
SEND 000008
SEND 0004000300020001

WAIT 560000
SEND 000008
SEND 0004000300020001

WAIT 7601020004
SEND 000100

WAIT 3f02013f
SEND 000211
SEND 3f5f644969664f6f42624d6d6547675070

WAIT 6f0305630061a800
SEND 000300

WAIT 6f04027001
SEND 000400

WAIT 6f05026f00
SEND 000500

WAIT 7006036f0301
SEND 000600

#now we set power state
WAIT 700703760013
SEND 000700

#now we set power state
WAIT 700803760119
SEND 000800

#now we set power state
WAIT 700903760219
SEND 000900

# and turn them on
WAIT 700a036f0201
SEND 000a00

# and turn them on
WAIT 700b036f0101
SEND 000b00

# and turn them on
WAIT 700c036f0001
SEND 000c00

# and turn 0P6 off again
WAIT 700d036f0000
SEND 000d00

#and on again
WAIT 700e036f0001
SEND 000e00

WAIT 6d0f026d00
SEND 000f00

WAIT 6d10025300
SEND 001000

WAIT 6211080000001010000000
SEND 001100

WAIT 62128800000012000000000000200000000083000000000000000000000080000000800000008000000080000000800000008000000080000000000000008000000080000000000000000000000115000001210000012d000001450000015d000001750000018d000001a5000001bd000001d5000001f10000020100000211000002210000000000000000
SEND 001200

WAIT 6213880000001200000080f000e7fee7fcf8d5428323004770d100330146c00000e7f9d00a2900029b23c04b0543182a0060182201d002601a4b0304404770e7f40c40a0000044a00013004b042201601a42524b0322ff601a009246c04770e000e280e000e1004a054904401a680b021b23a0600b431346c04770a0000028ffff0fff4802010360014318
SEND 001300

WAIT 621488000000120000010047702001a00030004b0122004770601aa00030104b0122014770601ae000e2804b0122024770601ae000e2804b0322044b03601a601a320c46c04770e000e280000003244b0322084b03601a601a320946c04770e000e280000003244b0322104b03601a601a320246c04770e000e280000003244b0322204b03601a601a3a0d
SEND 001400

WAIT 621588000000120000018046c04770e000e280000003244b0322404b03601a601a3a2c46c04770e000e280000003244b0322804b03601a601a3a6b46c04770e000e280000003244b032280601a00523aea4b024770601ae000e280000003244b042280601a00923aea4b03601a3aff46c04770e000e280000003244b022280601a00d246c04770e000e280
SEND 001500

WAIT 62168800000012000002004b022280601a011246c04770e000e2804b022280601a015246c04770e000e2804b022280601a019246c04770e000e280f7ffb570482aff4568034c2ad03442a34b29228068190152430a4d28681a601a4011492701922280601a430a4925681a22804011430a021222c0601a02d26819601a430a4b20681a6004601a4b1f2400
SEND 001600

WAIT 6217880000001200000280601c2064601c4b1e601c4b1e602b2302fefaf7ff68282201b2800011fefcf7ff601c2378ff30f7fff7ffe7fe4916ff17f7ff20aa26faff21f7ff20642564fee5240000b620aa0021ff16f7fff7ff00283401fedbf7ff002842b4fed7e7f0d1f200000314deadbeee0000030c00000330ffff9ffffffe7fffa000002c00000310
SEND 001700

WAIT 62181800000012000003000000032c00000324abcd12340006a308
SEND 001800

WAIT 6219080000001010000001
SEND 001900


